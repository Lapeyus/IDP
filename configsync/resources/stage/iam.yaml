---
apiVersion: iam.cnrm.cloud.google.com/v1beta1
kind: IAMCustomRole
metadata:
  annotations:
    cnrm.cloud.google.com/project-id: jvillarreal-sandbox-360616
  name: iamcustomrolesampleproject
  namespace: iac
spec:
  title: Example Project-Level Custom Role
  description: This role only contains two permissions - publish and update
  permissions:
    - pubsub.topics.publish
    - pubsub.topics.update
  stage: GA
---
apiVersion: iam.cnrm.cloud.google.com/v1beta1
kind: IAMPolicyMember
metadata:
  name: iampolicymember-sample-projectrole
  namespace: iac
spec:
  member: serviceAccount:iamcustomrole-dep-project@jvillarreal-sandbox-360616.iam.gserviceaccount.com
  role: projects/jvillarreal-sandbox-360616/roles/iamcustomrolesampleproject
  resourceRef:
    kind: PubSubTopic
    name: iamcustomrole-dep-project
    namespace: iac
    apiVersion: pubsub.cnrm.cloud.google.com
---
apiVersion: iam.cnrm.cloud.google.com/v1beta1
kind: IAMServiceAccount
metadata:
  annotations:
    cnrm.cloud.google.com/project-id: jvillarreal-sandbox-360616
  name: iamcustomrole-dep-project
  namespace: iac
---
apiVersion: pubsub.cnrm.cloud.google.com/v1beta1
kind: PubSubTopic
metadata:
  name: iamcustomrole-dep-project